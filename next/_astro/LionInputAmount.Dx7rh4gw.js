import{a as u}from"./lit-element.qDHKJJma.js";import"./lit-html.C7L4dwLU.js";import{a as o,f as l}from"./formatNumber.aN4wfHaw.js";import{p as y}from"./parseNumber.Cin8KryK.js";import{L as p}from"./LocalizeMixin.VYu75dkK.js";import{L as f}from"./LionInput.B2KYRD9B.js";import{I as d}from"./NumberValidators.CmKpqCIb.js";import{g as m}from"./getLocalizeManager.W5d_ICRU.js";function h(t){return t==="Philippine pesos"&&(t="Philippine pisos"),t}function _(t,e){const r=m();let n=o(1,{...e,style:"currency",currency:t,currencyDisplay:"name"}).filter(s=>s.type==="currency").map(s=>s.value).join(" ");const a=e?.locale||r.locale;return t==="PHP"&&a==="en-GB"&&(n=h(n)),n}function c(t="EUR"){const e=o(123,{style:"currency",currency:t}),[r]=e.filter(i=>i.type==="fraction");return r?r.value.length:0}function N(t,e){return t==="TRY"&&e==="tr-TR"?"TL":t}function D(t,e){const r={currency:"EUR",...e};return typeof r.minimumFractionDigits>"u"&&(r.minimumFractionDigits=c(r.currency)),typeof r.maximumFractionDigits>"u"&&(r.maximumFractionDigits=c(r.currency)),l(t,r)}function g(t,e){return t===""?"":N(t,e)}function b(t,e){const r=t?.toString().includes("e");return typeof e>"u"||r?Number(t):+`${Math.round(+`${t}e${e}`)}e-${e}`}function C(t,e){if(t.match(/[^0-9,.\-\u2212 ]/g)&&e?.mode!=="pasted")return;const i=y(t,e);if(typeof i!="number"||Number.isNaN(i))return;const n={...e};return n.currency&&typeof n.maximumFractionDigits>"u"&&(n.maximumFractionDigits=c(n.currency)),b(i,n.maximumFractionDigits)}class z extends p(f){static get properties(){return{currency:String,modelValue:Number,_currencyDisplayNodeSlot:{attribute:!1},locale:{attribute:!1}}}get slots(){return{...super.slots,[this._currencyDisplayNodeSlot]:()=>{const e=document.createElement("span");return e.setAttribute("data-label",""),e.textContent=this.__currencyLabel,e}}}static get styles(){return[...super.styles,u`
        .input-group__container > .input-group__input ::slotted(.form-control) {
          text-align: right;
        }
      `]}constructor(){super(),this.parser=C,this.formatter=D,this.currency=void 0,this.locale=void 0,this.__currencyDisplayNodeIsConnected=!0,this.defaultValidators.push(new d),this._currencyDisplayNodeSlot="after"}connectedCallback(){super.connectedCallback(),this.type="text",this._inputNode.setAttribute("inputmode","decimal"),this.currency&&this.__setCurrencyDisplayLabel()}updated(e){super.updated(e),e.has("currency")&&this._onCurrencyChanged({currency:this.currency||null}),e.has("locale")&&this.locale!==e.get("locale")&&(this.locale?this.formatOptions.locale=this.locale:delete this.formatOptions.locale,this.__reformat())}_connectSlotMixin(){super._connectSlotMixin(),this._isPrivateSlot(this._currencyDisplayNodeSlot)&&this._onCurrencyChanged({currency:this.currency||null})}onLocaleChanged(e,r){super.onLocaleChanged(e,r),this.locale||this.__reformat()}_reflectBackOn(){return super._reflectBackOn()||this._isPasting}_onCurrencyChanged({currency:e}){if(this.__currencyDisplayNode)if(this.formatOptions.currency=e||void 0,e){this.__currencyDisplayNodeIsConnected||(this.appendChild(this.__currencyDisplayNode),this.addToAriaLabelledBy(this.__currencyDisplayNode,{idPrefix:this._currencyDisplayNodeSlot}),this.__currencyDisplayNodeIsConnected=!0),this.__currencyDisplayNode.textContent=this.__currencyLabel;try{this._calculateValues({source:null})}catch(r){throw r instanceof RangeError&&(this.__currencyDisplayNode?.remove(),this.__currencyDisplayNodeIsConnected=!1),r}this.__setCurrencyDisplayLabel()}else this.__currencyDisplayNode?.remove(),this.__currencyDisplayNodeIsConnected=!1}get __currencyDisplayNode(){const e=Array.from(this.children).find(r=>r.slot===this._currencyDisplayNodeSlot);return e&&(this.__storedCurrencyDisplayNode=e),e||this.__storedCurrencyDisplayNode}__setCurrencyDisplayLabel(){this.__currencyDisplayNode&&this.__currencyDisplayNode.setAttribute("aria-label",this.currency?_(this.currency,{}):"")}get __currencyLabel(){return this.currency?g(this.currency,this._localizeManager.locale):""}__reformat(){this.formattedValue=this._callFormatter()}}export{z as L,D as f,C as p};
