import{a as E}from"./lit-element.qDHKJJma.js";import"./lit-html.C7L4dwLU.js";import{N as H}from"./NativeTextFieldMixin.Cfq2aKpe.js";import{L as C}from"./LionField.DGnPMihp.js";var p=new Map;function O(t){var o=p.get(t);o&&o.destroy()}function R(t){var o=p.get(t);o&&o.update()}var h=null;typeof window>"u"?((h=function(t){return t}).destroy=function(t){return t},h.update=function(t){return t}):((h=function(t,o){return t&&Array.prototype.forEach.call(t.length?t:[t],function(r){return(function(e){if(e&&e.nodeName&&e.nodeName==="TEXTAREA"&&!p.has(e)){var a,c=null,i=window.getComputedStyle(e),x=(a=e.value,function(){v({testForHeightReduction:a===""||!e.value.startsWith(a),restoreTextAlign:null}),a=e.value}),f=function(u){e.removeEventListener("autosize:destroy",f),e.removeEventListener("autosize:update",n),e.removeEventListener("input",x),window.removeEventListener("resize",n),Object.keys(u).forEach(function(l){return e.style[l]=u[l]}),p.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,textAlign:e.style.textAlign,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",f),e.addEventListener("autosize:update",n),e.addEventListener("input",x),window.addEventListener("resize",n),e.style.overflowX="hidden",e.style.wordWrap="break-word",p.set(e,{destroy:f,update:n}),n()}function v(u){var l,d,g=u.restoreTextAlign,m=g===void 0?null:g,w=u.testForHeightReduction,T=w===void 0||w,F=i.overflowY;if(e.scrollHeight!==0&&(i.resize==="vertical"?e.style.resize="none":i.resize==="both"&&(e.style.resize="horizontal"),T&&(l=(function(s){for(var z=[];s&&s.parentNode&&s.parentNode instanceof Element;)s.parentNode.scrollTop&&z.push([s.parentNode,s.parentNode.scrollTop]),s=s.parentNode;return function(){return z.forEach(function(N){var y=N[0],A=N[1];y.style.scrollBehavior="auto",y.scrollTop=A,y.style.scrollBehavior=null})}})(e),e.style.height=""),d=i.boxSizing==="content-box"?e.scrollHeight-(parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)):e.scrollHeight+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),i.maxHeight!=="none"&&d>parseFloat(i.maxHeight)?(i.overflowY==="hidden"&&(e.style.overflow="scroll"),d=parseFloat(i.maxHeight)):i.overflowY!=="hidden"&&(e.style.overflow="hidden"),e.style.height=d+"px",m&&(e.style.textAlign=m),l&&l(),c!==d&&(e.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),c=d),F!==i.overflow&&!m)){var b=i.textAlign;i.overflow==="hidden"&&(e.style.textAlign=b==="start"?"end":"start"),v({restoreTextAlign:b,testForHeightReduction:!0})}}function n(){v({testForHeightReduction:!0,restoreTextAlign:null})}})(r)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],O),t},h.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],R),t});var _=h;class L extends C{get _inputNode(){return Array.from(this.children).find(o=>o.slot==="input")}}class W extends H(L){static get properties(){return{maxRows:{type:Number,attribute:"max-rows"},rows:{type:Number,reflect:!0},readOnly:{type:Boolean,attribute:"readonly",reflect:!0},placeholder:{type:String,reflect:!0}}}get slots(){return{...super.slots,input:()=>{const o=document.createElement("textarea");return o.style.resize!==void 0&&(o.style.resize="none"),o}}}constructor(){super(),this.rows=2,this.maxRows=6,this.readOnly=!1,this.placeholder=""}connectedCallback(){super.connectedCallback(),this.__initializeAutoresize(),this.__intersectionObserver=new IntersectionObserver(()=>this.resizeTextarea()),this.__intersectionObserver.observe(this)}updated(o){if(super.updated(o),o.has("name")&&(this._inputNode.name=this.name),o.has("autocomplete")&&(this._inputNode.autocomplete=this.autocomplete),o.has("disabled")&&(this._inputNode.disabled=this.disabled,this.validate()),o.has("rows")){const r=this._inputNode;r&&(r.rows=this.rows)}if(o.has("readOnly")){const r=this._inputNode;r&&(r.readOnly=this.readOnly)}if(o.has("placeholder")){const r=this._inputNode;r&&(r.placeholder=this.placeholder)}o.has("modelValue")&&this.resizeTextarea(),(o.has("maxRows")||o.has("rows"))&&this.setTextareaMaxHeight()}disconnectedCallback(){super.disconnectedCallback(),_.destroy(this._inputNode)}setTextareaMaxHeight(){const{value:o}=this._inputNode;this._inputNode.value="",this.resizeTextarea();const r=window.getComputedStyle(this._inputNode,null),e=parseFloat(r.lineHeight)||parseFloat(r.height)/this.rows,a=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),c=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i=r.boxSizing==="border-box"?a+c:0;this._inputNode.style.maxHeight=`${e*this.maxRows+i}px`,this._inputNode.value=o,this.resizeTextarea()}static get styles(){return[...super.styles,E`
        .input-group__container > .input-group__input ::slotted(.form-control) {
          box-sizing: content-box;
          overflow-x: hidden; /* for FF adds height to the TextArea to reserve place for scroll-bars */
        }

        /* Workaround https://bugzilla.mozilla.org/show_bug.cgi?id=1739079 */
        :host([disabled]) ::slotted(textarea) {
          user-select: none;
        }
      `]}get updateComplete(){return this.__textareaUpdateComplete?Promise.all([this.__textareaUpdateComplete,super.updateComplete]):super.updateComplete}resizeTextarea(){_.update(this._inputNode)}__initializeAutoresize(){this.__shady_native_contains?this.__textareaUpdateComplete=this.__waitForTextareaRenderedInRealDOM().then(()=>{this.__startAutoresize(),this.__textareaUpdateComplete=null}):this.__startAutoresize()}async __waitForTextareaRenderedInRealDOM(){let o=3;for(;o!==0&&!this.__shady_native_contains(this._inputNode);)await new Promise(r=>setTimeout(r)),o-=1}__startAutoresize(){_(this._inputNode),this.setTextareaMaxHeight()}}customElements.define("lion-textarea",W);
