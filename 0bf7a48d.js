import{F as e}from"./48b0a907.js";import{V as t,I as l}from"./7902d8e0.js";import{d as i}from"./dc2f5f5a.js";const s=i(i=>class extends(e(t(l(i)))){static get properties(){return{multipleChoice:{type:Boolean,attribute:"multiple-choice"}}}get modelValue(){const e=this._getCheckedElements();return this.multipleChoice?e.map(e=>e.choiceValue):e[0]?e[0].choiceValue:""}set modelValue(e){const t=(t,l)=>"object"==typeof t.choiceValue?JSON.stringify(t.choiceValue)===JSON.stringify(e):t.choiceValue===l;this.__isInitialModelValue?this.registrationComplete.then(()=>{this.__isInitialModelValue=!1,this._setCheckedElements(e,t),this.requestUpdate("modelValue",this._oldModelValue)}):(this._setCheckedElements(e,t),this.requestUpdate("modelValue",this._oldModelValue)),this._oldModelValue=this.modelValue}get serializedValue(){const e=this._getCheckedElements();return this.multipleChoice?e.map(e=>e.serializedValue.value):e[0]?e[0].serializedValue.value:""}set serializedValue(e){const t=(e,t)=>e.serializedValue.value===t;this.__isInitialSerializedValue?this.registrationComplete.then(()=>{this.__isInitialSerializedValue=!1,this._setCheckedElements(e,t),this.requestUpdate("serializedValue")}):(this._setCheckedElements(e,t),this.requestUpdate("serializedValue"))}get formattedValue(){const e=this._getCheckedElements();return this.multipleChoice?e.map(e=>e.formattedValue):e[0]?e[0].formattedValue:""}set formattedValue(e){const t=(e,t)=>e.formattedValue===t;this.__isInitialFormattedValue?this.registrationComplete.then(()=>{this.__isInitialFormattedValue=!1,this._setCheckedElements(e,t)}):this._setCheckedElements(e,t)}get operationMode(){return"choice-group"===this._repropagationRole?"select":"enter"}constructor(){super(),this.multipleChoice=!1,this._repropagationRole="choice-group",this.__isInitialModelValue=!0,this.__isInitialSerializedValue=!0,this.__isInitialFormattedValue=!0}connectedCallback(){super.connectedCallback(),this.registrationComplete.then(()=>{this.__isInitialModelValue=!1,this.__isInitialSerializedValue=!1,this.__isInitialFormattedValue=!1})}_completeRegistration(){Promise.resolve().then(()=>super._completeRegistration())}updated(e){super.updated(e),e.has("name")&&this.name!==e.get("name")&&this.formElements.forEach(e=>{e.name=this.name})}addFormElement(e,t){this._throwWhenInvalidChildModelValue(e),e.name=this.name,super.addFormElement(e,t)}clear(){this.multipleChoice?this.modelValue=[]:this.modelValue=""}_triggerInitialModelValueChangedEvent(){this.registrationComplete.then(()=>{this._dispatchInitialModelValueChangedEvent()})}_getFromAllFormElementsFilter(e,t){return!0}_getFromAllFormElements(e,t){const l=t||this._getFromAllFormElementsFilter;return"modelValue"===e||"serializedValue"===e||"formattedValue"===e?this[e]:this.formElements.filter(t=>l(t,e)).map(e=>e.property)}_throwWhenInvalidChildModelValue(e){if("boolean"!=typeof e.modelValue.checked||!Object.prototype.hasOwnProperty.call(e.modelValue,"value"))throw new Error(`The ${this.tagName.toLowerCase()} name="${this.name}" does not allow to register ${e.tagName.toLowerCase()} with .modelValue="${e.modelValue}" - The modelValue should represent an Object { value: "foo", checked: false }`)}_isEmpty(){return this.multipleChoice?0===this.modelValue.length:"string"==typeof this.modelValue&&""===this.modelValue||(void 0===this.modelValue||null===this.modelValue)}_checkSingleChoiceElements(e){const{target:t}=e;if(!1===t.checked)return;const l=t.name;this.formElements.filter(e=>e.name===l).forEach(e=>{e!==t&&(e.checked=!1)})}_getCheckedElements(){return this.formElements.filter(e=>e.checked&&!e.disabled)}_setCheckedElements(e,t){if(null!=e)for(let l=0;l<this.formElements.length;l+=1)if(this.multipleChoice){let t=e.includes(this.formElements[l].modelValue.value);"object"==typeof this.formElements[l].modelValue.value&&(t=e.map(e=>JSON.stringify(e)).includes(JSON.stringify(this.formElements[l].modelValue.value))),this.formElements[l].checked=t}else t(this.formElements[l],e)?this.formElements[l].checked=!0:this.formElements[l].checked=!1;else this.formElements.forEach(e=>e.checked=!1)}__setChoiceGroupTouched(){const e=this.modelValue;null!=e&&e!==this.__previousCheckedValue&&(this.touched=!0,this.__previousCheckedValue=e)}_onBeforeRepropagateChildrenValues(e){const t=e.detail&&e.detail.element||e.target;!this.multipleChoice&&t.checked&&(this.formElements.forEach(e=>{t.choiceValue!==e.choiceValue&&(e.checked=!1)}),this.__setChoiceGroupTouched(),this.requestUpdate("modelValue",this._oldModelValue),this._oldModelValue=this.modelValue)}_repropagationCondition(e){return!("choice-group"===this._repropagationRole&&!this.multipleChoice&&!e.checked)}});export{s as C};
