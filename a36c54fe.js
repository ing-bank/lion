import{a as e}from"./b4be29f1.js";import{L as t}from"./4cc99b59.js";import{g as r}from"./d45984a3.js";import{f as i,a as c}from"./88185952.js";import{p as n}from"./10e1d49e.js";import{L as s}from"./c2aef983.js";import{I as o}from"./e49751c9.js";function a(e="EUR"){const t=i(123,{style:"currency",currency:e}),[r]=t.filter(e=>"fraction"===e.type);return r?r.value.length:0}function u(e,t){const r={currency:"EUR",...t};return void 0===r.minimumFractionDigits&&(r.minimumFractionDigits=a(r.currency)),void 0===r.maximumFractionDigits&&(r.maximumFractionDigits=a(r.currency)),c(e,r)}function l(e,t){if(e.match(/[^0-9,.\-\u2212 ]/g)&&"pasted"!==t?.mode)return;const r=n(e,t);if("number"!=typeof r||Number.isNaN(r))return;const i={...t};return i.currency&&void 0===i.maximumFractionDigits&&(i.maximumFractionDigits=a(i.currency)),function(e,t){const r=e?.toString().includes("e");return Number(void 0===t||r?e:`${Math.round(Number(`${e}e${t}`))}e-${t}`)}(r,i.maximumFractionDigits)}class y extends(t(s)){static get properties(){return{currency:String,modelValue:Number,_currencyDisplayNodeSlot:{attribute:!1},locale:{attribute:!1}}}get slots(){return{...super.slots,[this._currencyDisplayNodeSlot]:()=>{const e=document.createElement("span");return e.setAttribute("data-label",""),e.textContent=this.__currencyLabel,e}}}static get styles(){return[...super.styles,e`
        .input-group__container > .input-group__input ::slotted(.form-control) {
          text-align: right;
        }
      `]}constructor(){super(),this.parser=l,this.formatter=u,this.currency=void 0,this.locale=void 0,this.__currencyDisplayNodeIsConnected=!0,this.defaultValidators.push(new o),this._currencyDisplayNodeSlot="after"}connectedCallback(){super.connectedCallback(),this.type="text",this._inputNode.setAttribute("inputmode","decimal"),this.currency&&this.__setCurrencyDisplayLabel()}updated(e){super.updated(e),e.has("currency")&&this._onCurrencyChanged({currency:this.currency||null}),e.has("locale")&&this.locale!==e.get("locale")&&(this.locale?this.formatOptions.locale=this.locale:delete this.formatOptions.locale,this.__reformat())}_connectSlotMixin(){super._connectSlotMixin(),this._isPrivateSlot(this._currencyDisplayNodeSlot)&&this._onCurrencyChanged({currency:this.currency||null})}onLocaleChanged(e,t){super.onLocaleChanged(e,t),this.locale||this.__reformat()}_reflectBackOn(){return super._reflectBackOn()||this._isPasting}_onCurrencyChanged({currency:e}){if(this.__currencyDisplayNode)if(this.formatOptions.currency=e||void 0,e){this.__currencyDisplayNodeIsConnected||(this.appendChild(this.__currencyDisplayNode),this.addToAriaLabelledBy(this.__currencyDisplayNode,{idPrefix:this._currencyDisplayNodeSlot}),this.__currencyDisplayNodeIsConnected=!0),this.__currencyDisplayNode.textContent=this.__currencyLabel;try{this._calculateValues({source:null})}catch(e){throw e instanceof RangeError&&(this.__currencyDisplayNode?.remove(),this.__currencyDisplayNodeIsConnected=!1),e}this.__setCurrencyDisplayLabel()}else this.__currencyDisplayNode?.remove(),this.__currencyDisplayNodeIsConnected=!1}get __currencyDisplayNode(){const e=Array.from(this.children).find(e=>e.slot===this._currencyDisplayNodeSlot);return e&&(this.__storedCurrencyDisplayNode=e),e||this.__storedCurrencyDisplayNode}__setCurrencyDisplayLabel(){this.__currencyDisplayNode&&this.__currencyDisplayNode.setAttribute("aria-label",this.currency?function(e,t){const c=r();let n=i(1,{...t,style:"currency",currency:e,currencyDisplay:"name"}).filter(e=>"currency"===e.type).map(e=>e.value).join(" ");const s=t?.locale||c.locale;return"PHP"===e&&"en-GB"===s&&(n=function(e){return"Philippine pesos"===e&&(e="Philippine pisos"),e}(n)),n}(this.currency,{}):"")}get __currencyLabel(){return this.currency?(e=this.currency,t=this._localizeManager.locale,""===e?"":function(e,t){return"TRY"===e&&"tr-TR"===t?"TL":e}(e,t)):"";var e,t}__reformat(){this.formattedValue=this._callFormatter()}}export{y as L,u as f,l as p};
