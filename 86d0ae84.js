import{a as e}from"./b4be29f1.js";import{N as t}from"./9157d4cc.js";import{L as o}from"./298b3bc0.js";var r=new Map;function s(e){var t=r.get(e);t&&t.destroy()}function i(e){var t=r.get(e);t&&t.update()}var a=null;"undefined"==typeof window?((a=function(e){return e}).destroy=function(e){return e},a.update=function(e){return e}):((a=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!r.has(e)){var t,o=null,s=window.getComputedStyle(e),i=(t=e.value,function(){n({testForHeightReduction:""===t||!e.value.startsWith(t),restoreTextAlign:null}),t=e.value}),a=function(t){e.removeEventListener("autosize:destroy",a),e.removeEventListener("autosize:update",l),e.removeEventListener("input",i),window.removeEventListener("resize",l),Object.keys(t).forEach(function(o){return e.style[o]=t[o]}),r.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,textAlign:e.style.textAlign,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",a),e.addEventListener("autosize:update",l),e.addEventListener("input",i),window.addEventListener("resize",l),e.style.overflowX="hidden",e.style.wordWrap="break-word",r.set(e,{destroy:a,update:l}),l()}function n(t){var r,i,a=t.restoreTextAlign,l=void 0===a?null:a,d=t.testForHeightReduction,u=void 0===d||d,h=s.overflowY;if(0!==e.scrollHeight&&("vertical"===s.resize?e.style.resize="none":"both"===s.resize&&(e.style.resize="horizontal"),u&&(r=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push([e.parentNode,e.parentNode.scrollTop]),e=e.parentNode;return function(){return t.forEach(function(e){var t=e[0],o=e[1];t.style.scrollBehavior="auto",t.scrollTop=o,t.style.scrollBehavior=null})}}(e),e.style.height=""),i="content-box"===s.boxSizing?e.scrollHeight-(parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)):e.scrollHeight+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),"none"!==s.maxHeight&&i>parseFloat(s.maxHeight)?("hidden"===s.overflowY&&(e.style.overflow="scroll"),i=parseFloat(s.maxHeight)):"hidden"!==s.overflowY&&(e.style.overflow="hidden"),e.style.height=i+"px",l&&(e.style.textAlign=l),r&&r(),o!==i&&(e.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),o=i),h!==s.overflow&&!l)){var p=s.textAlign;"hidden"===s.overflow&&(e.style.textAlign="start"===p?"end":"start"),n({restoreTextAlign:p,testForHeightReduction:!0})}}function l(){n({testForHeightReduction:!0,restoreTextAlign:null})}}(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e},a.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e});var n=a;class l extends o{get _inputNode(){return Array.from(this.children).find(e=>"input"===e.slot)}}class d extends(t(l)){static get properties(){return{maxRows:{type:Number,attribute:"max-rows"},rows:{type:Number,reflect:!0},readOnly:{type:Boolean,attribute:"readonly",reflect:!0},placeholder:{type:String,reflect:!0}}}get slots(){return{...super.slots,input:()=>{const e=document.createElement("textarea");return void 0!==e.style.resize&&(e.style.resize="none"),e}}}constructor(){super(),this.rows=2,this.maxRows=6,this.readOnly=!1,this.placeholder=""}connectedCallback(){super.connectedCallback(),this.__initializeAutoresize(),this.__intersectionObserver=new IntersectionObserver(()=>this.resizeTextarea()),this.__intersectionObserver.observe(this)}updated(e){if(super.updated(e),e.has("name")&&(this._inputNode.name=this.name),e.has("autocomplete")&&(this._inputNode.autocomplete=this.autocomplete),e.has("disabled")&&(this._inputNode.disabled=this.disabled,this.validate()),e.has("rows")){const e=this._inputNode;e&&(e.rows=this.rows)}if(e.has("readOnly")){const e=this._inputNode;e&&(e.readOnly=this.readOnly)}if(e.has("placeholder")){const e=this._inputNode;e&&(e.placeholder=this.placeholder)}e.has("modelValue")&&this.resizeTextarea(),(e.has("maxRows")||e.has("rows"))&&this.setTextareaMaxHeight()}disconnectedCallback(){super.disconnectedCallback(),n.destroy(this._inputNode)}setTextareaMaxHeight(){const{value:e}=this._inputNode;this._inputNode.value="",this.resizeTextarea();const t=window.getComputedStyle(this._inputNode,null),o=parseFloat(t.lineHeight)||parseFloat(t.height)/this.rows,r=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),s=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),i="border-box"===t.boxSizing?r+s:0;this._inputNode.style.maxHeight=`${o*this.maxRows+i}px`,this._inputNode.value=e,this.resizeTextarea()}static get styles(){return[...super.styles,e`
        .input-group__container > .input-group__input ::slotted(.form-control) {
          box-sizing: content-box;
          overflow-x: hidden; /* for FF adds height to the TextArea to reserve place for scroll-bars */
        }

        /* Workaround https://bugzilla.mozilla.org/show_bug.cgi?id=1739079 */
        :host([disabled]) ::slotted(textarea) {
          user-select: none;
        }
      `]}get updateComplete(){return this.__textareaUpdateComplete?Promise.all([this.__textareaUpdateComplete,super.updateComplete]):super.updateComplete}resizeTextarea(){n.update(this._inputNode)}__initializeAutoresize(){this.__shady_native_contains?this.__textareaUpdateComplete=this.__waitForTextareaRenderedInRealDOM().then(()=>{this.__startAutoresize(),this.__textareaUpdateComplete=null}):this.__startAutoresize()}async __waitForTextareaRenderedInRealDOM(){let e=3;for(;0!==e&&!this.__shady_native_contains(this._inputNode);)await new Promise(e=>setTimeout(e)),e-=1}__startAutoresize(){n(this._inputNode),this.setTextareaMaxHeight()}}customElements.define("lion-textarea",d);
