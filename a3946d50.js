import{B as e}from"./b4be29f1.js";import"./05905ff1.js";function t(e,t){return`${document.location.origin}/${e.match(/[a-zA-Z0-9\/\-_]*/)[0]}.${t}`}async function n(){const n=new URLSearchParams(document.location.hash.substr(1));if(n.get("stylesheets"))for(const e of n.getAll("stylesheets")){const n=t(e,"css");if(!document.querySelector(`link[rel="stylesheet"][href="${n}"]`)){const e=document.createElement("link");e.rel="stylesheet",e.href=n,document.head.appendChild(e)}}if(n.get("moduleUrls"))for(const e of n.getAll("moduleUrls")){const n=t(e,"js");if(!document.querySelector(`script[type=module][src="${n}"]`)){const e=document.createElement("script");e.type="module",e.src=n,document.head.appendChild(e)}}n.get("theme")&&document.documentElement.setAttribute("theme",n.get("theme")),n.get("platform")&&document.documentElement.setAttribute("platform",n.get("platform")),n.get("language")&&(document.documentElement.setAttribute("lang",n.get("language")),document.documentElement.setAttribute("data-lang",n.get("language"))),n.get("story-key")&&document.documentElement.setAttribute("story-key",n.get("story-key")),"true"===n.get("edge-distance")?document.documentElement.setAttribute("edge-distance",""):document.documentElement.removeAttribute("edge-distance");const o=t(n.get("story-file"),"js"),s=await import(o);e(s[n.get("story-key")]({shadowRoot:document}),document.body)}window.addEventListener("hashchange",n,!1),n();new ResizeObserver(()=>{const e=document.body.getBoundingClientRect(),t={action:"mdjs-viewer-resize",storyKey:document.documentElement.getAttribute("story-key"),width:e.width,height:e.height};parent.postMessage(JSON.stringify(t),"*")}).observe(document.body);
