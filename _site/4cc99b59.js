import{T as e,E as a}from"./b4be29f1.js";import{i as t}from"./19d2607c.js";import{f as s}from"./afb8834e.js";import{e as i}from"./05905ff1.js";import{g as o}from"./d45984a3.js";import{d as c}from"./dc2f5f5a.js";class n{constructor(e){this.G=e}disconnect(){this.G=void 0}reconnect(e){this.G=e}deref(){return this.G}}class l{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??=new Promise(e=>this.Z=e)}resume(){this.Z?.(),this.Y=this.Z=void 0}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const h=e=>!t(e)&&"function"==typeof e.then,d=1073741823;const r=i(class extends s{constructor(){super(...arguments),this._$Cwt=d,this._$Cbt=[],this._$CK=new n(this),this._$CX=new l}render(...a){return a.find(e=>!h(e))??e}update(a,t){const s=this._$Cbt;let i=s.length;this._$Cbt=t;const o=this._$CK,c=this._$CX;this.isConnected||this.disconnected();for(let e=0;e<t.length&&!(e>this._$Cwt);e++){const a=t[e];if(!h(a))return this._$Cwt=e,a;e<i&&a===s[e]||(this._$Cwt=d,i=0,Promise.resolve(a).then(async e=>{for(;c.get();)await c.get();const t=o.deref();if(void 0!==t){const s=t._$Cbt.indexOf(a);s>-1&&s<t._$Cwt&&(t._$Cwt=s,t.setValue(e))}}))}return e}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}),_=c(e=>class extends e{static get localizeNamespaces(){return[]}static get waitForLocalizeNamespaces(){return!0}constructor(){super(),this._localizeManager=o(),this.__boundLocalizeOnLocaleChanged=(...e)=>{const a=Array.from(e)[0];this.__localizeOnLocaleChanged(a)},this.__boundLocalizeOnLocaleChanging=()=>{this.__localizeOnLocaleChanging()},this.__localizeStartLoadingNamespaces(),this.localizeNamespacesLoaded&&this.localizeNamespacesLoaded.then(()=>{this.__localizeMessageSync=!0})}async scheduleUpdate(){Object.getPrototypeOf(this).constructor.waitForLocalizeNamespaces&&await this.localizeNamespacesLoaded,super.scheduleUpdate()}connectedCallback(){super.connectedCallback(),this.localizeNamespacesLoaded&&this.localizeNamespacesLoaded.then(()=>this.onLocaleReady()),this._localizeManager.addEventListener("__localeChanging",this.__boundLocalizeOnLocaleChanging),this._localizeManager.addEventListener("localeChanged",this.__boundLocalizeOnLocaleChanged)}disconnectedCallback(){super.disconnectedCallback(),this._localizeManager.removeEventListener("__localeChanging",this.__boundLocalizeOnLocaleChanging),this._localizeManager.removeEventListener("localeChanged",this.__boundLocalizeOnLocaleChanged)}msgLit(e,t,s){return this.__localizeMessageSync?this._localizeManager.msg(e,t,s):this.localizeNamespacesLoaded?r(this.localizeNamespacesLoaded.then(()=>this._localizeManager.msg(e,t,s)),a):""}__getUniqueNamespaces(){const e=[],a=new Set;return Object.getPrototypeOf(this).constructor.localizeNamespaces.forEach(a.add.bind(a)),a.forEach(a=>{e.push(a)}),e}__localizeStartLoadingNamespaces(){this.localizeNamespacesLoaded=this._localizeManager.loadNamespaces(this.__getUniqueNamespaces())}__localizeOnLocaleChanging(){this.__localizeStartLoadingNamespaces()}__localizeOnLocaleChanged(e){this.onLocaleChanged(e.detail.newLocale,e.detail.oldLocale)}onLocaleReady(){this.onLocaleUpdated()}onLocaleChanged(e,a){this.onLocaleUpdated(),this.requestUpdate()}onLocaleUpdated(){}});export{_ as L};
