import"./lit-element.qDHKJJma.js";import{T as h,E as u}from"./lit-html.C7L4dwLU.js";import{i as m}from"./directive-helpers.CLllgGgm.js";import{f as p}from"./async-directive.CHVe8p0E.js";import{e as z}from"./directive.CGE4aKEl.js";import{g as C}from"./getLocalizeManager.W5d_ICRU.js";import{d as f}from"./dedupeMixin.6XPTJgK8.js";/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class N{constructor(t){this.G=t}disconnect(){this.G=void 0}reconnect(t){this.G=t}deref(){return this.G}}class ${constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??=new Promise((t=>this.Z=t))}resume(){this.Z?.(),this.Y=this.Z=void 0}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const d=s=>!m(s)&&typeof s.then=="function",_=1073741823;class b extends p{constructor(){super(...arguments),this._$Cwt=_,this._$Cbt=[],this._$CK=new N(this),this._$CX=new $}render(...t){return t.find((e=>!d(e)))??h}update(t,e){const a=this._$Cbt;let i=a.length;this._$Cbt=e;const g=this._$CK,r=this._$CX;this.isConnected||this.disconnected();for(let o=0;o<e.length&&!(o>this._$Cwt);o++){const n=e[o];if(!d(n))return this._$Cwt=o,n;o<i&&n===a[o]||(this._$Cwt=_,i=0,Promise.resolve(n).then((async L=>{for(;r.get();)await r.get();const c=g.deref();if(c!==void 0){const l=c._$Cbt.indexOf(n);l>-1&&l<c._$Cwt&&(c._$Cwt=l,c.setValue(L))}})))}return h}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}const w=z(b),M=s=>class extends s{static get localizeNamespaces(){return[]}static get waitForLocalizeNamespaces(){return!0}constructor(){super(),this._localizeManager=C(),this.__boundLocalizeOnLocaleChanged=(...e)=>{const a=Array.from(e)[0];this.__localizeOnLocaleChanged(a)},this.__boundLocalizeOnLocaleChanging=()=>{this.__localizeOnLocaleChanging()},this.__localizeStartLoadingNamespaces(),this.localizeNamespacesLoaded&&this.localizeNamespacesLoaded.then(()=>{this.__localizeMessageSync=!0})}async scheduleUpdate(){Object.getPrototypeOf(this).constructor.waitForLocalizeNamespaces&&await this.localizeNamespacesLoaded,super.scheduleUpdate()}connectedCallback(){super.connectedCallback(),this.localizeNamespacesLoaded&&this.localizeNamespacesLoaded.then(()=>this.onLocaleReady()),this._localizeManager.addEventListener("__localeChanging",this.__boundLocalizeOnLocaleChanging),this._localizeManager.addEventListener("localeChanged",this.__boundLocalizeOnLocaleChanged)}disconnectedCallback(){super.disconnectedCallback(),this._localizeManager.removeEventListener("__localeChanging",this.__boundLocalizeOnLocaleChanging),this._localizeManager.removeEventListener("localeChanged",this.__boundLocalizeOnLocaleChanged)}msgLit(e,a,i){return this.__localizeMessageSync?this._localizeManager.msg(e,a,i):this.localizeNamespacesLoaded?w(this.localizeNamespacesLoaded.then(()=>this._localizeManager.msg(e,a,i)),u):""}__getUniqueNamespaces(){const e=[],a=new Set;return Object.getPrototypeOf(this).constructor.localizeNamespaces.forEach(a.add.bind(a)),a.forEach(i=>{e.push(i)}),e}__localizeStartLoadingNamespaces(){this.localizeNamespacesLoaded=this._localizeManager.loadNamespaces(this.__getUniqueNamespaces())}__localizeOnLocaleChanging(){this.__localizeStartLoadingNamespaces()}__localizeOnLocaleChanged(e){this.onLocaleChanged(e.detail.newLocale,e.detail.oldLocale)}onLocaleReady(){this.onLocaleUpdated()}onLocaleChanged(e,a){this.onLocaleUpdated(),this.requestUpdate()}onLocaleUpdated(){}},G=f(M);export{G as L};
