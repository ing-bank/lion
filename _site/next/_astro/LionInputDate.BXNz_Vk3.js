import{L as g}from"./LocalizeMixin.VYu75dkK.js";import{L as h}from"./LionInput.DRpWIRa3.js";import{f as m}from"./formatDate.D_ccCp8N.js";import{g as D}from"./getLocalizeManager.W5d_ICRU.js";import{c as l}from"./DateValidators.CEq8F9yx.js";function y(t){return t.replace(/^[^\d]*/g,"").replace(/[^\d]*$/g,"")}function $(t){return y(t.replace(/[^\d-. /]/g,""))}function L(t,e){const r=m(t,e);return $(r)}function f(t){return t.match(/(\d{1,4})([^\d]+)(\d{1,4})([^\d]+)(\d{1,4})/)}function z(t){function e(o){function d(u){const c={2012:"year",12:"month",20:"day"},p=o[u];return c[p]}return[1,3,5].map(d)}const r=new Date;r.setDate(20),r.setMonth(11),r.setFullYear(2012);const a=L(r,t?{locale:t}:{}),i=f(a),s={};return i&&(s.positions=e(i)),`${s.positions[0]}-${s.positions[1]}-${s.positions[2]}`}function x(t){const r=/^\d+$/.test(String(t))?Math.abs(Number(t)):t;return String(r<10?`0${r}`:r)}function w(t){const e=f(t),r=e?e[2]:"",n=t.split&&t.split(r).filter(a=>a.trim().length>0);return!n||n.length!==3?"":n.map(x).join("-")}function b(t){return/^\d{2}(\d{2})?$/g.test(t)}const F=t=>{const e={};return r=>{const n=r;if(n in e)return e[n];const a=t(n);return e[n]=a,a}},M=F(z);function I(t,e){const r=D(),n=w(t);let a;switch(M(e?.locale||r.locale)){case"day-month-year":a=`${n.slice(6,10)}/${n.slice(3,5)}/${n.slice(0,2)}`;break;case"month-day-year":a=`${n.slice(6,10)}/${n.slice(0,2)}/${n.slice(3,5)}`;break;case"year-month-day":a=`${n.slice(0,4)}/${n.slice(5,7)}/${n.slice(8,10)}`;break;default:a="0000/00/00"}const[i,s,o]=a.split("/").map(Number),[d]=a.split("/");if(!b(d))return;let u=i;i<50&&(u=2e3+i);const c=new Date(u,s-1,o);if(i>0&&s>0&&o>0&&c.getDate()===o&&c.getMonth()===s-1)return c}class B extends g(h){static get properties(){return{modelValue:Date}}constructor(){super(),this.parser=e=>e===""?void 0:I(e,this.formatOptions),this.formatter=m,this.defaultValidators.push(new l),this.type="text"}updated(e){super.updated(e),e.has("locale")&&this._calculateValues({source:null})}serializer(e){if(new l().execute(e))return"";const n=e.getTimezoneOffset()*6e4;return new Date(e.getTime()-n).toISOString().slice(0,10)}deserializer(e){return new Date(e)}}export{B as L};
